(function(n,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("react/jsx-runtime"),require("@mui/material"),require("react"),require("axios"),require("@mui/icons-material/AccountCircleRounded"),require("@mui/icons-material/LogoutRounded"),require("@mui/icons-material/MenuRounded"),require("@mui/icons-material/NotificationsOutlined"),require("@mui/icons-material/SearchRounded"),require("@mui/material/AppBar"),require("@mui/material/Avatar"),require("@mui/material/Badge"),require("@mui/material/Box"),require("@mui/material/Divider"),require("@mui/material/IconButton"),require("@mui/material/InputAdornment"),require("@mui/material/Menu"),require("@mui/material/MenuItem"),require("@mui/material/Stack"),require("@mui/material/styles"),require("@mui/material/TextField"),require("@mui/material/Toolbar"),require("@mui/material/Typography"),require("@mui/material/useMediaQuery"),require("@mui/material/Card"),require("@mui/material/CardContent"),require("@mui/material/Button"),require("@mui/icons-material/AutoAwesomeRounded"),require("@mui/material/Tooltip"),require("@mui/icons-material/NotificationsRounded"),require("@mui/material/Drawer")):typeof define=="function"&&define.amd?define(["exports","react/jsx-runtime","@mui/material","react","axios","@mui/icons-material/AccountCircleRounded","@mui/icons-material/LogoutRounded","@mui/icons-material/MenuRounded","@mui/icons-material/NotificationsOutlined","@mui/icons-material/SearchRounded","@mui/material/AppBar","@mui/material/Avatar","@mui/material/Badge","@mui/material/Box","@mui/material/Divider","@mui/material/IconButton","@mui/material/InputAdornment","@mui/material/Menu","@mui/material/MenuItem","@mui/material/Stack","@mui/material/styles","@mui/material/TextField","@mui/material/Toolbar","@mui/material/Typography","@mui/material/useMediaQuery","@mui/material/Card","@mui/material/CardContent","@mui/material/Button","@mui/icons-material/AutoAwesomeRounded","@mui/material/Tooltip","@mui/icons-material/NotificationsRounded","@mui/material/Drawer"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.LumoraWrapperComponent={},n.jsxRuntime,n.MaterialUI,n.React,n.axios,n.AccountCircleRoundedIcon,n.LogoutRoundedIcon,n.MenuRoundedIcon,n.NotificationsOutlinedIcon,n.SearchRoundedIcon,n.AppBar,n.Avatar,n.Badge,n.Box,n.Divider,n.IconButton,n.InputAdornment,n.Menu,n.MenuItem,n.Stack,n.styles,n.TextField,n.MuiToolbar,n.Typography,n.useMediaQuery,n.Card,n.CardContent,n.Button,n.AutoAwesomeRoundedIcon,n.Tooltip,n.NotificationsRoundedIcon,n.Drawer))})(this,function(n,e,E,T,fe,pe,ge,qe,Ge,Le,We,X,me,D,I,W,je,ze,xe,w,Re,He,Pe,y,Be,Je,Qe,Ee,Ye,Se,$e,Xe){"use strict";function Ve(r){const o=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(r){for(const t in r)if(t!=="default"){const a=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(o,t,a.get?a:{enumerable:!0,get:()=>r[t]})}}return o.default=r,Object.freeze(o)}const V=Ve(T);class l extends Error{constructor(o,t,a=null){super(o),this.name="AuthError",this.code=t,this.originalError=a,this.timestamp=new Date().toISOString()}}const d={STORAGE_ACCESS_DENIED:"STORAGE_ACCESS_DENIED",TOKEN_NOT_FOUND:"TOKEN_NOT_FOUND",TOKEN_INVALID:"TOKEN_INVALID",TOKEN_EXPIRED:"TOKEN_EXPIRED",LOGOUT_FAILED:"LOGOUT_FAILED",UNKNOWN_ERROR:"UNKNOWN_ERROR"},p={ACCESS_TOKEN:"lumoraAccessToken",REFRESH_TOKEN:"lumoraRefreshToken",USER:"lumoraUser"},C={ACCESS_TOKEN:"accessToken",REFRESH_TOKEN:"refreshToken",USER:"user"},Ze=()=>{if(!(typeof window>"u"||!window.localStorage))try{const r=localStorage.getItem(C.ACCESS_TOKEN),o=localStorage.getItem(C.REFRESH_TOKEN),t=localStorage.getItem(C.USER);r&&!localStorage.getItem(p.ACCESS_TOKEN)&&localStorage.setItem(p.ACCESS_TOKEN,r),o&&!localStorage.getItem(p.REFRESH_TOKEN)&&localStorage.setItem(p.REFRESH_TOKEN,o),t&&!localStorage.getItem(p.USER)&&localStorage.setItem(p.USER,t),(r||o||t)&&(localStorage.removeItem(C.ACCESS_TOKEN),localStorage.removeItem(C.REFRESH_TOKEN),localStorage.removeItem(C.USER))}catch(r){console.warn("Failed to migrate legacy localStorage keys:",r)}},Z=r=>{try{if(typeof window>"u")return console.warn("localStorage access attempted on server side"),null;if(!window.localStorage)throw new l("localStorage is not available",d.STORAGE_ACCESS_DENIED);return window.localStorage.getItem(r)}catch(o){throw o.name==="QuotaExceededError"?(console.error("Storage quota exceeded"),new l("Storage quota exceeded. Please clear browser data.",d.STORAGE_ACCESS_DENIED,o)):o.name==="SecurityError"?(console.error("localStorage access denied (private browsing or security settings)"),new l("Access to localStorage is denied. Please check browser settings.",d.STORAGE_ACCESS_DENIED,o)):(console.error("Unexpected error accessing localStorage:",o.name),new l("Failed to access storage",d.STORAGE_ACCESS_DENIED,o))}},ee=(r,o)=>{try{if(typeof window>"u")return console.warn("localStorage write attempted on server side"),!1;if(!window.localStorage)throw new l("localStorage is not available",d.STORAGE_ACCESS_DENIED);return window.localStorage.setItem(r,o),!0}catch(t){throw t.name==="QuotaExceededError"?(console.error("Storage quota exceeded"),new l("Storage quota exceeded. Please clear browser data.",d.STORAGE_ACCESS_DENIED,t)):t.name==="SecurityError"?(console.error("localStorage write denied (private browsing or security settings)"),new l("Access to localStorage is denied. Please check browser settings.",d.STORAGE_ACCESS_DENIED,t)):(console.error("Unexpected error writing to localStorage:",t.name),new l("Failed to write to storage",d.STORAGE_ACCESS_DENIED,t))}},we=r=>{try{return typeof window>"u"?(console.warn("localStorage removal attempted on server side"),!1):window.localStorage?(window.localStorage.removeItem(r),!0):(console.warn("localStorage is not available"),!1)}catch(o){return o.name!=="SecurityError"&&console.warn(`Could not remove localStorage key "${r}"`),!1}},b=()=>{try{Ze();const r=Z(p.ACCESS_TOKEN),o=Z(p.REFRESH_TOKEN),t=Z(p.USER);let a=null;if(t)try{a=JSON.parse(t)}catch{t&&t!=="null"&&t!=="undefined"&&console.warn("Invalid user data in localStorage, clearing:",t.substring(0,50)),we(p.USER)}return{accessToken:r,refreshToken:o,user:a}}catch(r){throw r instanceof l?r:new l("Failed to retrieve authentication tokens",d.UNKNOWN_ERROR,r)}},Oe=()=>{try{const{accessToken:r,refreshToken:o}=b();return!(r||o)?{isAuthenticated:!1,error:new l("No authentication tokens found",d.TOKEN_NOT_FOUND)}:{isAuthenticated:!0,error:null}}catch(r){return console.error("Authentication check failed:",r),{isAuthenticated:!1,error:r instanceof l?r:new l("Authentication check failed",d.UNKNOWN_ERROR,r)}}},re=(r,o,t=null)=>{try{if(!r&&!o)throw new l("At least one token must be provided",d.TOKEN_INVALID);return r&&ee(p.ACCESS_TOKEN,r),o&&ee(p.REFRESH_TOKEN,o),t&&ee(p.USER,JSON.stringify(t)),{success:!0,error:null}}catch(a){return console.error("Failed to store authentication tokens:",a),{success:!1,error:a instanceof l?a:new l("Failed to store tokens",d.UNKNOWN_ERROR,a)}}},U=()=>{try{return[p.ACCESS_TOKEN,p.REFRESH_TOKEN,p.USER,C.ACCESS_TOKEN,C.REFRESH_TOKEN,C.USER].map(a=>we(a)).every(a=>a)||console.warn("Some tokens could not be removed from localStorage"),{success:!0,error:null}}catch(r){return console.error("Failed to clear authentication tokens:",r),{success:!1,error:r instanceof l?r:new l("Failed to clear tokens",d.LOGOUT_FAILED,r)}}},Ne=()=>{try{const{user:r}=b();return{user:r,error:null}}catch(r){return console.error("Failed to get current user:",r),{user:null,error:r instanceof l?r:new l("Failed to retrieve user data",d.UNKNOWN_ERROR,r)}}},er=r=>{if(!(r instanceof l))return"An unexpected error occurred. Please try again.";switch(r.code){case d.STORAGE_ACCESS_DENIED:return"Unable to access browser storage. Please check your browser settings and disable private browsing if enabled.";case d.TOKEN_NOT_FOUND:return"You are not logged in. Please sign in to continue.";case d.TOKEN_INVALID:return"Your session is invalid. Please sign in again.";case d.TOKEN_EXPIRED:return"Your session has expired. Please sign in again.";case d.LOGOUT_FAILED:return"Failed to log out properly. Please clear your browser cache and try again.";case d.UNKNOWN_ERROR:default:return"An unexpected error occurred. Please try again or contact support if the problem persists."}},P=(r,o="Unknown")=>{const t={context:o,message:r.message,code:r instanceof l?r.code:"UNKNOWN",timestamp:r instanceof l?r.timestamp:new Date().toISOString(),stack:r.stack};r instanceof l&&r.originalError&&(t.originalError={name:r.originalError.name,message:r.originalError.message}),console.warn("[Auth Error]",t)},rr=r=>{if(!r)throw new Error("API base URL is required to create axios client");const o=fe.create({baseURL:r,headers:{"Content-Type":"application/json"}});let t=!1,a=null,g=[];const u=(s,i)=>{g.forEach(({resolve:x,reject:A})=>{s?A(s):i&&x(i)}),g=[]};return o.interceptors.request.use(s=>{const{accessToken:i}=b();return i&&s.headers&&(s.headers.Authorization=`Bearer ${i}`),s},s=>Promise.reject(s)),o.interceptors.response.use(s=>s,async s=>{var _;const i=s.config,x=(_=s.response)==null?void 0:_.status,A=(i==null?void 0:i.url)||"",v=A.includes("/auth/refresh");if(x!==401||i._retry||v)return Promise.reject(s);i._retry=!0;const{refreshToken:O}=b();if(!O){const h=new Error("No refresh token available for token refresh");return P(h,"AxiosClient - Token Refresh"),U(),typeof window<"u"&&(window.location.href="/login"),Promise.reject(s)}if(t&&a)return new Promise((h,m)=>{g.push({resolve:h,reject:m})}).then(h=>{const{accessToken:m,refreshToken:f}=h;if(i.headers&&(i.headers.Authorization=`Bearer ${m}`),A.includes("/auth/logout"))try{if(typeof i.data=="string"){const S=JSON.parse(i.data||"{}");S.refresh_token=f,i.data=JSON.stringify(S)}else i.data&&typeof i.data=="object"?i.data.refresh_token=f:i.data=JSON.stringify({refresh_token:f})}catch{i.data=JSON.stringify({refresh_token:f})}return o(i)}).catch(h=>Promise.reject(h));t=!0,a=fe.post(`${r}/auth/refresh`,{refresh_token:O});try{const h=await a,{accessToken:m,refreshToken:f}=h.data;if(re(m,f,null),u(null,{accessToken:m,refreshToken:f}),i.headers&&(i.headers.Authorization=`Bearer ${m}`),A.includes("/auth/logout"))try{if(typeof i.data=="string"){const S=JSON.parse(i.data||"{}");S.refresh_token=f,i.data=JSON.stringify(S)}else i.data&&typeof i.data=="object"?i.data.refresh_token=f:i.data=JSON.stringify({refresh_token:f})}catch{i.data=JSON.stringify({refresh_token:f})}return o(i)}catch(h){return P(h,"AxiosClient - Token Refresh Failed"),u(h),U(),typeof window<"u"&&(window.location.href="/login"),Promise.reject(h)}finally{t=!1,a=null}}),o},tr=async r=>{const{accessToken:o,refreshToken:t}=b();if(o)return!0;if(t)try{const a=await r.post("/auth/refresh",{refresh_token:t});if(a.data.success&&a.data.accessToken)return re(a.data.accessToken,a.data.refreshToken||null,null),!0}catch(a){P(a,"TokenValidator - Refresh Failed")}return U(),window.location.href="/login",!1},or=Re.styled(Pe)({width:"100%",padding:"8px 16px",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",gap:"16px",flexShrink:0}),nr=({appName:r="Dashboard",pageName:o="Home",onMenuClick:t,showMenuButton:a=!0,headerStyles:g,userName:u="User Name",userEmail:s,userAvatar:i,onProfileClick:x,onAccountClick:A,onSettingsClick:v,onLogout:O,showNotifications:_=!1,notificationCount:h=0,showSearchbar:m=!0,searchValue:f,onSearchChange:S,onSearchSubmit:j,showProfile:z=!0,userRole:te,accentColor:oe="#01584f",contentBackgroundColor:ne="#f2f9fc",navbarBackground:ie="#ff0000",navbarAccentColor:N="#000000",rightExtraContent:B=[],customNavbar:K,customNavbarProps:k})=>{const J=Be(c=>c.breakpoints.up("md")),[Q,Y]=V.useState(null),se=!!Q,M=c=>{S==null||S(c.target.value)},R=c=>{c.key==="Enter"&&j&&f&&j(f)},ae=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"User",le=c=>{Y(c.currentTarget)},F=()=>{Y(null)},q=c=>{c==null||c(),F()};return e.jsx(We,{position:"fixed",sx:{boxShadow:0,background:ie,top:"var(--template-frame-height, 0px)",left:0,width:"100%",zIndex:1,height:"60px",...g},children:e.jsxs(or,{variant:"dense",sx:{height:"100%"},children:[e.jsxs(w,{direction:"row",sx:{alignItems:"center",gap:2,flexShrink:0,flexGrow:1},children:[a&&!J&&e.jsx(W,{"aria-label":"menu",onClick:t,sx:{color:N,"&:hover":{backgroundColor:"action.hover"}},children:e.jsx(qe,{})}),e.jsxs(w,{direction:"row",sx:{alignItems:"center",gap:1,flexShrink:0},children:[e.jsx(y,{variant:"h6",sx:{color:N,fontWeight:600,fontSize:"20px",lineHeight:1,textTransform:"uppercase"},children:r}),e.jsx("img",{src:"/lumora-logo.svg",alt:"NEXA Logo",width:24,height:24,style:{flexShrink:0}})]}),K?e.jsx(K,{...k||{}}):m&&J&&e.jsx(He,{placeholder:"Search for deals or documents...",value:f||"",onChange:M,onKeyDown:R,size:"small",sx:{width:"400px","& .MuiOutlinedInput-root":{backgroundColor:ne,borderRadius:"8px","& fieldset":{borderColor:"transparent"},"&:hover fieldset":{borderColor:"transparent"},"&.Mui-focused fieldset":{borderColor:oe}}},InputProps:{startAdornment:e.jsx(je,{position:"start",children:e.jsx(Le,{sx:{color:N}})})}})]}),e.jsxs(w,{direction:"row",sx:{alignItems:"center",gap:1.5,flexShrink:0},children:[_&&e.jsx(me,{color:"error",variant:"dot",invisible:h===0,sx:{"& .MuiBadge-badge":{right:2,top:2}},children:e.jsx(W,{size:"small",sx:{color:N},children:e.jsx(Ge,{})})}),_&&z&&e.jsx(I,{orientation:"vertical",flexItem:!0,sx:{borderColor:"rgba(0, 0, 0, 0.12)",height:"24px",alignSelf:"center"}}),z&&e.jsxs(e.Fragment,{children:[e.jsxs(w,{direction:"row",onClick:le,sx:{alignItems:"center",gap:1,cursor:"pointer",borderRadius:"8px",padding:"4px 8px","&:hover":{backgroundColor:"action.hover"}},children:[i?e.jsx(X,{src:i,sx:{width:32,height:32}}):e.jsx(pe,{sx:{width:32,height:32,color:N}}),e.jsxs(D,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",minWidth:0},children:[e.jsx(y,{variant:"body2",sx:{color:N,fontWeight:500,lineHeight:1.2,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"150px"},children:u}),e.jsx(y,{variant:"caption",sx:{color:N,lineHeight:1.2,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"150px"},children:ae(te)})]})]}),e.jsxs(ze,{anchorEl:Q,open:se,onClose:F,transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},sx:{"& .MuiList-root":{padding:"4px"},"& .MuiPaper-root":{padding:0},"& .MuiDivider-root":{margin:"4px -4px"}},children:[e.jsx(xe,{onClick:()=>q(v),children:"Settings"}),e.jsx(I,{}),e.jsxs(xe,{onClick:()=>q(O),sx:{color:"error.main","&:hover":{color:"error.dark"}},children:[e.jsx(y,{sx:{flexGrow:1},children:"Logout"}),e.jsx(ge,{fontSize:"small"})]})]})]}),B.length!==0&&B.map(c=>c.type==="divider"?e.jsx(I,{orientation:"vertical",flexItem:!0,sx:{borderColor:"rgba(0, 0, 0, 0.12)",height:"24px",alignSelf:"center"}}):c.type==="profile"?e.jsxs(w,{direction:"row",onClick:c.onClick,sx:{alignItems:"center",gap:1,cursor:"pointer",borderRadius:"8px",padding:"4px 8px","&:hover":{backgroundColor:"action.hover"}},children:[c.avatar?e.jsx(X,{src:c.avatar,sx:{width:32,height:32}}):e.jsx(pe,{sx:{width:32,height:32,color:N}}),e.jsxs(D,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",minWidth:0},children:[e.jsx(y,{variant:"body2",sx:{color:N,fontWeight:500,lineHeight:1.2,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"150px"},children:c.name}),e.jsx(y,{variant:"caption",sx:{color:N,lineHeight:1.2,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"150px"},children:c.role})]})]}):null)]})]})})},Te=({title:r="",message:o="",buttonText:t="",onButtonClick:a,show:g=!0})=>g?e.jsx(Je,{variant:"outlined",sx:{m:1.5,flexShrink:0},children:e.jsxs(Qe,{children:[e.jsx(Ye,{fontSize:"small"}),e.jsx(y,{gutterBottom:!0,sx:{fontWeight:600},children:r}),e.jsx(y,{variant:"body2",sx:{mb:2,color:"text.secondary"},children:o}),e.jsx(Ee,{variant:"contained",size:"small",fullWidth:!0,onClick:a,children:t})]})}):null,Ae=({mainLinks:r,secondaryLinks:o=[],activePath:t,onLinkClick:a,accentColor:g="#01584f"})=>{const u=s=>{a&&a(s)};return e.jsxs(w,{sx:{flexGrow:1,justifyContent:"flex-start",alignItems:"center",pt:2,gap:1},children:[r.map((s,i)=>e.jsxs(V.Fragment,{children:[e.jsx(Se,{title:s.text,placement:"right",arrow:!0,children:e.jsx(W,{component:"a",href:s.path,onClick:x=>{x.preventDefault(),x.stopPropagation(),u(s.path)},sx:{width:44,height:44,color:t===s.path?"#ffffff":g,backgroundColor:t===s.path?g:"transparent",borderRadius:t===s.path?"4px":"50%","&:hover":{backgroundColor:t===s.path?g:"action.hover",borderRadius:"4px"}},children:s.icon})}),i<r.length-1&&e.jsx(D,{sx:{width:"100%",display:"flex",justifyContent:"center"},children:e.jsx(I,{sx:{width:"60%",borderColor:"divider"}})})]},i)),o.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(D,{sx:{width:"100%",my:2,display:"flex",justifyContent:"center"},children:e.jsx(I,{sx:{width:"60%",borderColor:"divider"}})}),e.jsx(D,{sx:{mt:"auto",pb:2},children:e.jsx(w,{gap:1,alignItems:"center",children:o.map((s,i)=>e.jsxs(V.Fragment,{children:[e.jsx(Se,{title:s.text,placement:"right",arrow:!0,children:e.jsx(W,{component:"a",href:s.path,onClick:x=>{x.preventDefault(),x.stopPropagation(),u(s.path)},sx:{width:48,height:48,color:t===s.path?"#ffffff":"text.secondary",backgroundColor:t===s.path?"#01584F":"transparent",borderRadius:t===s.path?"4px":"50%","&:hover":{backgroundColor:t===s.path?"#01584F":"action.hover",borderRadius:"4px"}},children:s.icon})}),i<o.length-1&&e.jsx(D,{sx:{width:"100%",display:"flex",justifyContent:"center"},children:e.jsx(I,{sx:{width:"60%",borderColor:"divider"}})})]},i))})})]})]})},ir=({open:r,onClose:o,mainLinks:t,secondaryLinks:a=[],activePath:g,onLinkClick:u,userName:s="User Name",userAvatar:i,onLogout:x,showNotifications:A=!1,notificationCount:v=0,alertProps:O,accentColor:_="#01584f"})=>{const h=m=>{u==null||u(m),o()};return e.jsx(Xe,{anchor:"right",open:r,onClose:o,sx:{zIndex:m=>m.zIndex.drawer+1,"& .MuiDrawer-paper":{backgroundImage:"none",backgroundColor:"background.paper"}},children:e.jsxs(w,{sx:{maxWidth:"70dvw",height:"100%"},children:[e.jsxs(w,{direction:"row",sx:{p:2,pb:0,gap:1},children:[e.jsxs(w,{direction:"row",sx:{gap:1,alignItems:"center",flexGrow:1,p:1},children:[e.jsx(X,{sizes:"small",alt:s,src:i,sx:{width:24,height:24}}),e.jsx(y,{component:"p",variant:"h6",children:s})]}),A&&e.jsx(me,{color:"error",variant:"dot",invisible:v===0,sx:{"& .MuiBadge-badge":{right:2,top:2}},children:e.jsx(W,{size:"small",children:e.jsx($e,{})})})]}),e.jsx(I,{}),e.jsxs(w,{sx:{flexGrow:1},children:[e.jsx(Ae,{mainLinks:t,secondaryLinks:a,activePath:g,onLinkClick:h,accentColor:_}),e.jsx(I,{})]}),(O==null?void 0:O.show)&&e.jsx(Te,{...O}),e.jsx(w,{sx:{p:2},children:e.jsx(Ee,{variant:"outlined",fullWidth:!0,startIcon:e.jsx(ge,{}),onClick:x,children:"Logout"})})]})})},_e=({children:r,sidebarLinks:o=[],secondarySidebarLinks:t=[],appName:a="Dashboard",pageName:g="Home",showHeader:u=!0,showSidebar:s=!0,enableRefreshToken:i=!1,activePath:x,onLinkClick:A,userName:v,userEmail:O,userAvatar:_,onLogout:h,onProfileClick:m,onAccountClick:f,onSettingsClick:S,showNotifications:j=!0,notificationCount:z=0,showSearchbar:te=!0,searchValue:oe,onSearchChange:ne,onSearchSubmit:ie,showProfile:N=!0,userRole:B,onVerify:K,alertProps:k,style:J,headerStyles:Q,sidebarStyles:Y,contentStyles:se,accentColor:M="#01584f",contentBackgroundColor:R="#f2f9fc",navbarBackground:ae="#ffffff",navbarAccentColor:le="#000000",GlobalChatSidebar:F,useChatSidebar:q,rightExtraContent:c,customNavbar:ye,customNavbarProps:sr,redirectToLogin:ce,apiBaseUrl:Ce})=>{const ar=E.useTheme(),G=E.useMediaQuery(ar.breakpoints.down("md")),[Ie,ve]=T.useState(!1),[lr,cr]=T.useState(!0),[dr,ur]=T.useState(!1),[pr,$]=T.useState(null),de=q==null?void 0:q(),ke=(de==null?void 0:de.isOpen)??!1,ue=T.useRef(K),De=T.useRef(!1),be=T.useMemo(()=>rr(Ce),[Ce]);T.useEffect(()=>{ue.current=K},[K]);const hr=()=>{ve(!Ie)},fr=()=>{ve(!1)},Ue=Ke=>{const L=h(Ke);L instanceof Promise?L.then(()=>{$(null)}).catch(Me=>{console.error("Error in logout handler:",Me),$(null)}):$(null)};return T.useEffect(()=>{(()=>{try{const{isAuthenticated:L,error:Me}=Oe();if(!L){console.log("No session found, redirecting to login"),U(),ce();return}if(!De.current){const{user:H,error:he}=Ne();if(H&&!he){const Fe={name:H.name||"",email:H.email||"",profilePicture:H.profilePicture||"",role:H.role||""};$(Fe),De.current=!0,ue.current&&ue.current(Fe)}else he&&console.error("Error getting user data:",he)}ur(!0)}catch(L){console.error("Error checking session:",L),U(),ce()}finally{cr(!1)}})()},[ce]),T.useEffect(()=>{i&&tr(be)},[i,be]),lr?e.jsxs(E.Box,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",backgroundColor:"background.default"},children:[e.jsx(E.CircularProgress,{size:60,thickness:4,sx:{color:M}}),e.jsx(E.Box,{sx:{mt:2,color:"text.secondary"},children:"Checking session..."})]}):dr?e.jsxs(E.Box,{sx:{display:"flex",minHeight:"100vh",...J},children:[e.jsx(E.CssBaseline,{}),u&&e.jsx(nr,{appName:a,pageName:g,onMenuClick:G&&s?hr:void 0,showMenuButton:G&&s,headerStyles:Q,userName:v,userEmail:O,userAvatar:_,onProfileClick:m,onAccountClick:f,onSettingsClick:S,onLogout:Ue,showNotifications:j,notificationCount:z,showSearchbar:te&&!ye,searchValue:oe,onSearchChange:ne,onSearchSubmit:ie,showProfile:N,userRole:B,accentColor:M,contentBackgroundColor:R,navbarBackground:ae,navbarAccentColor:le,rightExtraContent:c,customNavbar:ye,customNavbarProps:sr}),s&&!G&&e.jsx(E.Drawer,{variant:"permanent",sx:{width:80,flexShrink:0,zIndex:2,"& .MuiDrawer-paper":{width:80,boxSizing:"border-box",bgcolor:R,borderRight:"none",top:u?"60px":0,height:u?"calc(100vh - 60px)":"100vh"},...Y},children:e.jsxs(E.Box,{sx:{overflow:"auto",height:"100%",display:"flex",flexDirection:"column",pt:2},children:[e.jsx(Ae,{mainLinks:o,secondaryLinks:t,activePath:x,onLinkClick:A,accentColor:M}),(k==null?void 0:k.show)&&e.jsx(Te,{...k})]})}),s&&G&&e.jsx(ir,{open:Ie,onClose:fr,mainLinks:o,secondaryLinks:t,activePath:x,onLinkClick:A,userName:v,userEmail:O,userAvatar:_,onLogout:Ue,onProfileClick:m,showNotifications:j,notificationCount:z,alertProps:k,accentColor:M}),e.jsx(E.Box,{component:"main",sx:{flexGrow:1,p:3,m:1,width:G?"100%":s?"calc(100% - 80px)":"100%",mt:u?"60px":0,ml:0,backgroundColor:R,...se},children:e.jsxs(E.Grid,{container:!0,spacing:3,children:[e.jsx(E.Grid,{size:{xs:12,md:ke&&F?8.5:12},sx:{display:"flex",flexDirection:"column"},children:r}),ke&&F&&e.jsx(E.Grid,{size:{xs:12,md:3.5},sx:{display:"flex",flexDirection:"column",position:{xs:"static",md:"sticky"},top:{xs:"auto",md:u?"60px":"0px"},alignSelf:"flex-start",height:{xs:"auto",md:u?"calc(100vh - 60px - 24px - 8px)":"calc(100vh - 24px - 8px)"},maxHeight:{xs:"none",md:u?"calc(100vh - 60px - 24px - 8px)":"calc(100vh - 24px - 8px)"}},children:e.jsx(F,{})})]})})]}):null};n.AUTH_ERROR_CODES=d,n.AuthError=l,n.LumoraWrapper=_e,n.clearAuthTokens=U,n.default=_e,n.getAuthErrorMessage=er,n.getAuthTokens=b,n.getCurrentUser=Ne,n.isAuthenticated=Oe,n.logAuthError=P,n.storeAuthTokens=re,Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
